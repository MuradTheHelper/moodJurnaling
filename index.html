<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mood Journal</title>
    <style>
        :root {
            --primary: #8B5CF6;
            --secondary: #C4B5FD;
            --background: #F3F4F6;
            --text: #1F2937;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            padding: 1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--primary);
        }

        .card {
            background: white;
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        .weekly-summary {
            margin-bottom: 2rem;
        }

        textarea, input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--secondary);
            border-radius: 0.5rem;
            margin: 1rem 0;
        }

        .mood-select {
            display: flex;
            justify-content: space-between;
            margin: 1rem 0;
        }

        .mood-option {
            font-size: 2rem;
            cursor: pointer;
            opacity: 0.5;
            transition: 0.3s;
        }

        .mood-option.selected {
            opacity: 1;
            transform: scale(1.2);
        }

        button {}
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            transition: 0.3s;
        }

        button:hover {
            background: #7C3AED;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìù Mood Journal</h1>
    </div>

    <div class="weekly-summary card" id="weeklySummary"></div>

    <div class="card">
        <h2>Catatan Hari Ini</h2>
        <input type="date" id="entryDate" value="">
        <textarea id="journalEntry" placeholder="Bagaimana perasaanmu hari ini?"></textarea>
        <div class="mood-select">
            <span class="mood-option" data-value="1">üò¢</span>
            <span class="mood-option" data-value="2">üòî</span>
            <span class="mood-option" data-value="3">üòê</span>
            <span class="mood-option" data-value="4">üòä</span>
            <span class="mood-option" data-value="5">üòÑ</span>
        </div>
        <button onclick="saveEntry()">Simpan Catatan</button>
    </div>

    <div id="entriesList"></div>

    <script>
        let selectedMood = 3;
        let entries = JSON.parse(localStorage.getItem('journalEntries')) || [];

        document.querySelectorAll('.mood-option').forEach(option => {
            option.addEventListener('click', () => {
                document.querySelectorAll('.mood-option').forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                selectedMood = parseInt(option.dataset.value);
            });
        });

        function saveEntry() {
            const text = document.getElementById('journalEntry').value;
            const date = document.getElementById('entryDate').value || new Date().toISOString().split('T')[0];
            if (!text) return;

            const entry = { date, text, mood: selectedMood };
            entries.unshift(entry);
            localStorage.setItem('journalEntries', JSON.stringify(entries));
            document.getElementById('journalEntry').value = '';
            document.querySelectorAll('.mood-option').forEach(opt => opt.classList.remove('selected'));
            updateDisplay();
        }

        function updateDisplay() {
            const entriesHtml = entries.map(entry => `
                <div class="card">
                    <div>${new Date(entry.date).toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</div>
                    <div>${entry.text}</div>
                    <div style="font-size: 1.5rem; margin-top: 0.5rem;">${getMoodEmoji(entry.mood)}</div>
                </div>
            `).join('');
            document.getElementById('entriesList').innerHTML = entriesHtml;

            if (entries.length > 0) {
                const weeklyEntries = entries.filter(entry => {
                    const entryDate = new Date(entry.date);
                    const weekAgo = new Date();
                    weekAgo.setDate(weekAgo.getDate() - 7);
                    return entryDate >= weekAgo;
                });

                if (weeklyEntries.length > 0) {
                    const avgMood = weeklyEntries.reduce((sum, entry) => sum + entry.mood, 0) / weeklyEntries.length;
                    const recommendation = getRecommendation(avgMood);
                    document.getElementById('weeklySummary').innerHTML = `
                        <h2>Ringkasan Minggu Ini</h2>
                        <p>Rata-rata mood: ${getMoodEmoji(Math.round(avgMood))} (${avgMood.toFixed(1)})</p>
                        <div class="card">
                            <h3>Rekomendasi:</h3>
                            <p>${recommendation}</p>
                        </div>
                    `;
                }
            }
        }

        function getMoodEmoji(mood) {
            const emojis = ['üò¢', 'üòî', 'üòê', 'üòä', 'üòÑ'];
            return emojis[mood - 1];
        }

        function getRecommendation(avgMood) {
            if (avgMood >= 4) return "Mood-mu sangat baik! Terus pertahankan kebiasaan positif.";
            if (avgMood >= 3) return "Mood-mu cukup stabil. Coba lakukan aktivitas menyenangkan.";
            if (avgMood >= 2) return "Coba berbicara dengan teman atau keluarga untuk merasa lebih baik.";
            return "Mood-mu sedang rendah. Pertimbangkan untuk berbicara dengan profesional kesehatan mental.";
        }

        document.getElementById('entryDate').value = new Date().toISOString().split('T')[0];
        updateDisplay();
    </script>
</body>
</html>
